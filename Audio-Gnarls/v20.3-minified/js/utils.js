export function clamp01(t){return Number.isFinite(t)?t<0?0:t>1?1:t:0}export function clamp(t,e,n){return t<e?e:t>n?n:t}export function pct(t){return Math.round(100*clamp01(t))}export const TAU=2*Math.PI,HALF_PI=.5*Math.PI;export function on(t,e,n,o){t?.addEventListener?.(e,n,o)}export function off(t,e,n,o){t?.removeEventListener?.(e,n,o)}export function addEvents(t,e){for(let n=0;n<(e?.length||0);n++)on(t,e[n][0],e[n][1],e[n][2])}export function removeEvents(t,e){for(let n=0;n<(e?.length||0);n++)off(t,e[n][0],e[n][1],e[n][2])}export function setText(t,e){t&&t.textContent!==e&&(t.textContent=e)}export function setPressed(t,e){const n=String(!!e);t?.getAttribute?.("aria-pressed")!==n&&t?.setAttribute?.("aria-pressed",n)}export function toggleClass(t,e,n){t?.classList?.toggle?.(e,!!n)}export function byId(t,e){return t?.getElementById?.(e)??null}export function setDisabledAll(t,e){const n=!!e;for(const e of t||[])e&&e.disabled!==n&&(e.disabled=n)}export const isBool=t=>"boolean"==typeof t;export const isNum=t=>"number"==typeof t&&!Number.isNaN(t);export const isString=t=>"string"==typeof t;export const isFunction=t=>"function"==typeof t;export const isObject=t=>null!==t&&"object"==typeof t&&!Array.isArray(t);export const isArray=Array.isArray;export function memoize(t,e=((...t)=>JSON.stringify(t))){const n=new Map;return function(...o){const r=e(...o);if(n.has(r))return n.get(r);const i=t.apply(this,o);return n.set(r,i),i}}export function debounce(t,e){let n;return function(...o){clearTimeout(n),n=setTimeout((()=>t.apply(this,o)),e)}}export function throttle(t,e){let n;return function(...o){n||(t.apply(this,o),n=!0,setTimeout((()=>n=!1),e))}}const g=globalThis;export const raf=g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||(t=>setTimeout(t,16));export const cancelRaf=g.cancelAnimationFrame||g.webkitCancelAnimationFrame||g.mozCancelAnimationFrame||clearTimeout;export const noop=()=>{};export const identity=t=>t;export function range(t,e,n=1){const o=[];if(n>0)for(let r=t;r<e;r+=n)o.push(r);else if(n<0)for(let r=t;r>e;r+=n)o.push(r);return o}export function deepClone(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t))return t.map(deepClone);const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=deepClone(t[n]));return e}export function deepMerge(t,...e){for(const n of e)if(isObject(t)&&isObject(n))for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const o=n[e];isObject(o)?(t[e]??={},deepMerge(t[e],o)):t[e]=o}return t}export const{sin:sin,cos:cos,abs:abs,PI:PI,pow:pow,sqrt:SQRT,imul:imul,min:min,max:max,floor:floor,ceil:ceil,round:round}=Math;export const SQRT2=Math.SQRT2;export const createElement=(t,e)=>Object.assign(document.createElement(t),e);export const ready=t=>"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t);export function waitFor(t,e=6e3){return new Promise((n=>{const o=performance.now(),r=()=>{t()?n(!0):performance.now()-o>e?n(!1):requestAnimationFrame(r)};r()}))}export const theta=(t,e,n=0)=>t/e*TAU+n;export const norm=t=>.5*(t+1);