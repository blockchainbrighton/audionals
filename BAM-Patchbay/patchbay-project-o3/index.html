<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Web Audio Modules Patchbay</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Import maps: Must be valid JSON -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.163.0/build/three.module.js",
      "three/examples/jsm/controls/OrbitControls.js": "https://cdn.jsdelivr.net/npm/three@0.163.0/examples/jsm/controls/OrbitControls.js",
      "@tweenjs/tween.js": "https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.esm.js",
      <!-- FIX: Revert to v14.8.39 which HAS the .mjs build -->
      "tone": "https://cdn.jsdelivr.net/npm/tone@14.8.39/build/Tone.mjs",
      "@webaudiomodules/sdk": "https://unpkg.com/@webaudiomodules/sdk@latest/dist/index.js"
    }
  }
  </script>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="./css/style.css">

</head>
<body>

  <header>
    <h1>Web Audio Modular Patchbay</h1>
    <button id="start-button">Start Audio</button>
    <button id="add-osc" disabled>Add Osc</button>
    <button id="add-delay" disabled>Add Delay</button>
    <button id="add-eq" disabled>Add EQ</button>
    <button id="add-plugin-a" disabled>Add Plugin A</button>
    <button id="add-plugin-b" disabled>Add Plugin B</button>
  </header>

  <div id="patchbay-container">
    <canvas id="cable-canvas"></canvas>
    <!-- Module panels will be appended here -->
  </div>

  <!-- Main application script (module) -->
  <script type="module" src="./js/main.js"></script>

</body>
</html>