<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mothy G – Whiney‑style Drum & Bass Synth</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!--
    Mothy G – a browser based synthesizer inspired by the liquid/tech drum and bass
    sounds championed by Whiney. The interface is divided into a series of panels
    to make the large parameter set approachable. All controls are labelled and
    keyboard accessible. Use the Tab key to move between controls and Enter to
    activate buttons. Double‑click any knob or slider to reset it to its default.
  -->
  <header id="header">
    <h1>Mothy G</h1>
    <p class="tagline">Whiney‑style Drum & Bass Synth</p>
  </header>

  <!-- Master / Transport panel -->
  <section class="panel" id="master-panel">
    <h2>Master &amp; Transport</h2>
    <div class="control-group">
      <label for="master-volume">Volume</label>
      <input type="range" id="master-volume" min="0" max="1" step="0.01" value="0.8">
    </div>
    <div class="control-group">
      <label for="limiter-ceiling">Limiter Ceiling</label>
      <input type="range" id="limiter-ceiling" min="0" max="1" step="0.01" value="0.95">
    </div>
    <div class="control-group">
      <label for="bpm">BPM</label>
      <input type="number" id="bpm" min="30" max="300" value="174">
    </div>
    <div class="control-group">
      <label for="swing">Swing&nbsp;%</label>
      <input type="range" id="swing" min="0" max="0.5" step="0.01" value="0.0">
    </div>
    <div class="control-group">
      <button id="play-toggle" aria-label="Play or Pause Sequencer">Play</button>
    </div>
  </section>

  <!-- Oscillator panel -->
  <section class="panel" id="oscillators-panel">
    <h2>Oscillators</h2>
    <div class="osc-section" id="oscA">
      <h3>Osc A</h3>
      <div class="control-group">
        <label for="oscA-wave">Waveform</label>
        <select id="oscA-wave">
          <option value="sine">Sine</option>
          <option value="triangle">Triangle</option>
          <option value="saw">Saw</option>
          <option value="square">Square</option>
        </select>
      </div>
      <div class="control-group">
        <label for="oscA-morph">Morph</label>
        <input type="range" id="oscA-morph" min="0" max="1" step="0.01" value="0">
      </div>
      <div class="control-group">
        <label for="oscA-tune">Tune&nbsp;(Hz)</label>
        <input type="number" id="oscA-tune" min="20" max="20000" value="440">
      </div>
      <div class="control-group">
        <label for="oscA-fine">Fine&nbsp;(cents)</label>
        <input type="range" id="oscA-fine" min="-100" max="100" step="1" value="0">
      </div>
      <div class="control-group">
        <label for="oscA-level">Level</label>
        <input type="range" id="oscA-level" min="0" max="1" step="0.01" value="0.5">
      </div>
      <div class="control-group">
        <label for="oscA-pan">Pan</label>
        <input type="range" id="oscA-pan" min="-1" max="1" step="0.01" value="0">
      </div>
    </div>
    <div class="osc-section" id="oscB">
      <h3>Osc B</h3>
      <div class="control-group">
        <label for="oscB-wave">Waveform</label>
        <select id="oscB-wave">
          <option value="sine">Sine</option>
          <option value="triangle">Triangle</option>
          <option value="saw">Saw</option>
          <option value="square">Square</option>
        </select>
      </div>
      <div class="control-group">
        <label for="oscB-morph">Morph</label>
        <input type="range" id="oscB-morph" min="0" max="1" step="0.01" value="0">
      </div>
      <div class="control-group">
        <label for="oscB-tune">Tune&nbsp;(Hz)</label>
        <input type="number" id="oscB-tune" min="20" max="20000" value="440">
      </div>
      <div class="control-group">
        <label for="oscB-fine">Fine&nbsp;(cents)</label>
        <input type="range" id="oscB-fine" min="-100" max="100" step="1" value="0">
      </div>
      <div class="control-group">
        <label for="oscB-level">Level</label>
        <input type="range" id="oscB-level" min="0" max="1" step="0.01" value="0.5">
      </div>
      <div class="control-group">
        <label for="oscB-pan">Pan</label>
        <input type="range" id="oscB-pan" min="-1" max="1" step="0.01" value="0">
      </div>
    </div>
    <div class="osc-section" id="sub">
      <h3>Sub&nbsp;Osc</h3>
      <div class="control-group">
        <label for="sub-level">Level</label>
        <input type="range" id="sub-level" min="0" max="1" step="0.01" value="0.5">
      </div>
      <div class="control-group">
        <label for="sub-blend">Square&nbsp;Blend&nbsp;%</label>
        <input type="range" id="sub-blend" min="0" max="0.2" step="0.01" value="0.0">
      </div>
      <div class="control-group">
        <label for="sub-saturation">Saturation</label>
        <input type="range" id="sub-saturation" min="0" max="1" step="0.01" value="0.0">
      </div>
    </div>
    <div class="osc-section" id="fm">
      <h3>FM&nbsp;Operator</h3>
      <div class="control-group">
        <label for="fm-ratio">Ratio</label>
        <input type="number" id="fm-ratio" min="0.1" max="10" step="0.1" value="2">
      </div>
      <div class="control-group">
        <label for="fm-index">Index</label>
        <input type="range" id="fm-index" min="0" max="1000" step="1" value="0">
      </div>
      <div class="control-group">
        <label for="fm-attack">Index&nbsp;Attack&nbsp;(ms)</label>
        <input type="number" id="fm-attack" min="0" max="2000" value="10">
      </div>
      <div class="control-group">
        <label for="fm-decay">Index&nbsp;Decay&nbsp;(ms)</label>
        <input type="number" id="fm-decay" min="0" max="2000" value="100">
      </div>
    </div>
  </section>

  <!-- Filters panel -->
  <section class="panel" id="filters-panel">
    <h2>Filters</h2>
    <div class="filter-section" id="filter1">
      <h3>Filter 1</h3>
      <div class="control-group">
        <label for="filter1-type">Type</label>
        <select id="filter1-type">
          <option value="lowpass">Lowpass</option>
          <option value="highpass">Highpass</option>
          <option value="bandpass">Bandpass</option>
        </select>
      </div>
      <div class="control-group">
        <label for="filter1-cutoff">Cutoff (Hz)</label>
        <input type="range" id="filter1-cutoff" min="20" max="20000" step="1" value="800">
      </div>
      <div class="control-group">
        <label for="filter1-res">Resonance</label>
        <input type="range" id="filter1-res" min="0.1" max="10" step="0.1" value="1">
      </div>
      <div class="control-group">
        <label for="filter1-drive">Drive</label>
        <input type="range" id="filter1-drive" min="0" max="1" step="0.01" value="0">
      </div>
      <div class="control-group">
        <label for="filter1-keytrack">Keytrack&nbsp;%</label>
        <input type="range" id="filter1-keytrack" min="0" max="1" step="0.01" value="0.5">
      </div>
    </div>
    <div class="filter-section" id="filter2">
      <h3>Filter 2</h3>
      <div class="control-group">
        <label for="filter2-type">Type</label>
        <select id="filter2-type">
          <option value="bandpass">Bandpass</option>
          <option value="notch">Notch</option>
          <option value="highpass">Highpass</option>
        </select>
      </div>
      <div class="control-group">
        <label for="filter2-cutoff">Cutoff (Hz)</label>
        <input type="range" id="filter2-cutoff" min="20" max="20000" step="1" value="2000">
      </div>
      <div class="control-group">
        <label for="filter2-res">Resonance</label>
        <input type="range" id="filter2-res" min="0.1" max="10" step="0.1" value="1">
      </div>
      <div class="control-group">
        <label for="filter2-drive">Drive</label>
        <input type="range" id="filter2-drive" min="0" max="1" step="0.01" value="0">
      </div>
      <div class="control-group">
        <label for="filter-mix">Serial/Parallel Mix</label>
        <input type="range" id="filter-mix" min="0" max="1" step="0.01" value="0.5">
      </div>
    </div>
  </section>

  <!-- Envelopes and LFOs -->
  <section class="panel" id="envelopes-panel">
    <h2>Envelopes &amp; LFOs</h2>
    <div class="env-section" id="amp-env">
      <h3>AMP&nbsp;Envelope</h3>
      <div class="control-group">
        <label for="amp-attack">Attack&nbsp;(ms)</label>
        <input type="number" id="amp-attack" min="0" max="5000" value="5">
      </div>
      <div class="control-group">
        <label for="amp-decay">Decay&nbsp;(ms)</label>
        <input type="number" id="amp-decay" min="0" max="5000" value="200">
      </div>
      <div class="control-group">
        <label for="amp-sustain">Sustain&nbsp;%</label>
        <input type="range" id="amp-sustain" min="0" max="1" step="0.01" value="0.8">
      </div>
      <div class="control-group">
        <label for="amp-release">Release&nbsp;(ms)</label>
        <input type="number" id="amp-release" min="0" max="5000" value="400">
      </div>
    </div>
    <div class="env-section" id="filter-env">
      <h3>FILTER&nbsp;Envelope</h3>
      <div class="control-group">
        <label for="filter-env-amount">Amount</label>
        <input type="range" id="filter-env-amount" min="-1" max="1" step="0.01" value="0.3">
      </div>
      <div class="control-group">
        <label for="filter-env-attack">Attack&nbsp;(ms)</label>
        <input type="number" id="filter-env-attack" min="0" max="5000" value="5">
      </div>
      <div class="control-group">
        <label for="filter-env-decay">Decay&nbsp;(ms)</label>
        <input type="number" id="filter-env-decay" min="0" max="5000" value="200">
      </div>
      <div class="control-group">
        <label for="filter-env-sustain">Sustain&nbsp;%</label>
        <input type="range" id="filter-env-sustain" min="0" max="1" step="0.01" value="0.8">
      </div>
      <div class="control-group">
        <label for="filter-env-release">Release&nbsp;(ms)</label>
        <input type="number" id="filter-env-release" min="0" max="5000" value="400">
      </div>
    </div>
    <div class="env-section" id="mod-env">
      <h3>MOD&nbsp;Envelope</h3>
      <div class="control-group">
        <label for="mod-env-amount">Amount</label>
        <input type="range" id="mod-env-amount" min="-1" max="1" step="0.01" value="0.5">
      </div>
      <div class="control-group">
        <label for="mod-env-attack">Attack&nbsp;(ms)</label>
        <input type="number" id="mod-env-attack" min="0" max="5000" value="10">
      </div>
      <div class="control-group">
        <label for="mod-env-decay">Decay&nbsp;(ms)</label>
        <input type="number" id="mod-env-decay" min="0" max="5000" value="300">
      </div>
      <div class="control-group">
        <label for="mod-env-sustain">Sustain&nbsp;%</label>
        <input type="range" id="mod-env-sustain" min="0" max="1" step="0.01" value="0.6">
      </div>
      <div class="control-group">
        <label for="mod-env-release">Release&nbsp;(ms)</label>
        <input type="number" id="mod-env-release" min="0" max="5000" value="500">
      </div>
    </div>

    <!-- LFOs -->
    <div class="lfo-section" id="lfo1">
      <h3>LFO 1</h3>
      <div class="control-group">
        <label for="lfo1-rate">Rate</label>
        <input type="range" id="lfo1-rate" min="0.05" max="20" step="0.01" value="1">
      </div>
      <div class="control-group">
        <label for="lfo1-shape">Shape</label>
        <select id="lfo1-shape">
          <option value="sine">Sine</option>
          <option value="triangle">Triangle</option>
          <option value="sawtooth">Sawtooth</option>
          <option value="square">Square</option>
        </select>
      </div>
      <div class="control-group">
        <label for="lfo1-fade">Fade&nbsp;(ms)</label>
        <input type="number" id="lfo1-fade" min="0" max="5000" value="0">
      </div>
    </div>
    <div class="lfo-section" id="lfo2">
      <h3>LFO 2</h3>
      <div class="control-group">
        <label for="lfo2-rate">Rate</label>
        <input type="range" id="lfo2-rate" min="0.05" max="20" step="0.01" value="0.25">
      </div>
      <div class="control-group">
        <label for="lfo2-shape">Shape</label>
        <select id="lfo2-shape">
          <option value="sine">Sine</option>
          <option value="triangle">Triangle</option>
          <option value="sawtooth">Sawtooth</option>
          <option value="square">Square</option>
        </select>
      </div>
      <div class="control-group">
        <label for="lfo2-fade">Fade&nbsp;(ms)</label>
        <input type="number" id="lfo2-fade" min="0" max="5000" value="0">
      </div>
    </div>
    <div class="lfo-section" id="lfo3">
      <h3>LFO 3</h3>
      <div class="control-group">
        <label for="lfo3-rate">Rate</label>
        <input type="range" id="lfo3-rate" min="0.05" max="20" step="0.01" value="0.125">
      </div>
      <div class="control-group">
        <label for="lfo3-shape">Shape</label>
        <select id="lfo3-shape">
          <option value="sine">Sine</option>
          <option value="triangle">Triangle</option>
          <option value="sawtooth">Sawtooth</option>
          <option value="square">Square</option>
        </select>
      </div>
      <div class="control-group">
        <label for="lfo3-fade">Fade&nbsp;(ms)</label>
        <input type="number" id="lfo3-fade" min="0" max="5000" value="0">
      </div>
    </div>
  </section>

  <!-- Mod Matrix -->
  <section class="panel" id="mod-matrix-panel">
    <h2>Mod Matrix</h2>
    <table>
      <thead>
        <tr>
          <th>Source</th>
          <th>Destination</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        <!-- eight rows for mod matrix -->
        <!-- Each row uses data attributes to bind to mod matrix entries in code -->
        <tr data-mod-row="0">
          <td>
            <select class="mod-source">
              <option value="none">—</option>
              <option value="lfo1">LFO 1</option>
              <option value="lfo2">LFO 2</option>
              <option value="lfo3">LFO 3</option>
              <option value="modEnv">Mod Env</option>
              <option value="ampEnv">Amp Env</option>
              <option value="filterEnv">Filter Env</option>
            </select>
          </td>
          <td>
            <select class="mod-dest">
              <option value="none">—</option>
              <option value="oscA-morph">Osc A Morph</option>
              <option value="oscB-morph">Osc B Morph</option>
              <option value="fm-index">FM Index</option>
              <option value="filter1-cutoff">Filter 1 Cutoff</option>
              <option value="filter2-cutoff">Filter 2 Cutoff</option>
              <option value="sub-blend">Sub Blend</option>
            </select>
          </td>
          <td>
            <input type="range" class="mod-amount" min="-1" max="1" step="0.01" value="0">
          </td>
        </tr>
        <!-- 7 more rows clones; we will clone this row via JS to avoid markup repetition -->
      </tbody>
    </table>
  </section>

  <!-- FX panel -->
  <section class="panel" id="fx-panel">
    <h2>FX</h2>
    <div class="fx-section" id="chorus">
      <h3>Chorus / Ensemble</h3>
      <div class="control-group">
        <label for="chorus-depth">Depth</label>
        <input type="range" id="chorus-depth" min="0" max="1" step="0.01" value="0.2">
      </div>
      <div class="control-group">
        <label for="chorus-rate">Rate</label>
        <input type="range" id="chorus-rate" min="0.05" max="5" step="0.01" value="0.5">
      </div>
    </div>
    <div class="fx-section" id="delay">
      <h3>Delay</h3>
      <div class="control-group">
        <label for="delay-time">Time&nbsp;(ms)</label>
        <input type="number" id="delay-time" min="1" max="2000" value="250">
      </div>
      <div class="control-group">
        <label for="delay-feedback">Feedback</label>
        <input type="range" id="delay-feedback" min="0" max="0.95" step="0.01" value="0.3">
      </div>
      <div class="control-group">
        <label for="delay-mix">Mix</label>
        <input type="range" id="delay-mix" min="0" max="1" step="0.01" value="0.2">
      </div>
    </div>
    <div class="fx-section" id="reverb">
      <h3>Reverb</h3>
      <div class="control-group">
        <label for="reverb-size">Size</label>
        <input type="range" id="reverb-size" min="0" max="1" step="0.01" value="0.5">
      </div>
      <div class="control-group">
        <label for="reverb-decay">Decay&nbsp;(s)</label>
        <input type="number" id="reverb-decay" min="0.1" max="10" step="0.1" value="2">
      </div>
      <div class="control-group">
        <label for="reverb-pre">Pre‑delay&nbsp;(ms)</label>
        <input type="number" id="reverb-pre" min="0" max="500" value="50">
      </div>
      <div class="control-group">
        <label for="reverb-mix">Mix</label>
        <input type="range" id="reverb-mix" min="0" max="1" step="0.01" value="0.3">
      </div>
    </div>
    <div class="fx-section" id="transient">
      <h3>Transient&nbsp;Shaper</h3>
      <div class="control-group">
        <label for="transient-attack">Attack</label>
        <input type="range" id="transient-attack" min="0" max="1" step="0.01" value="0.5">
      </div>
      <div class="control-group">
        <label for="transient-sustain">Sustain</label>
        <input type="range" id="transient-sustain" min="0" max="1" step="0.01" value="0.5">
      </div>
    </div>
  </section>

  <!-- Sequencer panel -->
  <section class="panel" id="sequencer-panel">
    <h2>Sequencer</h2>
    <div id="sequencer-grid"></div>
    <div class="control-group">
      <label for="sequence-length">Length</label>
      <input type="number" id="sequence-length" min="1" max="64" value="16">
    </div>
  </section>

  <!-- Preset / Seed panel -->
  <section class="panel" id="preset-panel">
    <h2>Presets &amp; Seeds</h2>
    <div class="control-group">
      <button id="save-preset">Save Preset</button>
      <button id="load-preset">Load Preset</button>
    </div>
    <div class="control-group">
      <button id="copy-preset">Copy JSON</button>
      <button id="paste-preset">Paste JSON</button>
    </div>
    <div class="control-group">
      <button id="randomize-seed">Randomize (Seed)</button>
      <input type="text" id="seed-value" readonly value="0">
    </div>
    <div id="factory-presets">
      <button class="factory" data-preset="deepLiquid">Deep Liquid</button>
      <button class="factory" data-preset="darkTech">Dark Tech</button>
      <button class="factory" data-preset="rollingPluck">Rolling Pluck</button>
      <button class="factory" data-preset="airPad">Air Pad</button>
    </div>
  </section>

  <!-- Visualizers panel -->
  <section class="panel" id="visual-panel">
    <h2>Visualizers</h2>
    <canvas id="scope" width="400" height="100" aria-label="Oscilloscope"></canvas>
    <canvas id="spectrum" width="400" height="100" aria-label="Spectrum"></canvas>
  </section>

  <script src="mothy-g.js"></script>
</body>
</html>