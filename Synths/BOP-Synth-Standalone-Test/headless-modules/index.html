<!doctype html>
<title>BOP-VST Demo</title>
<style> body{margin:0;background:#111;color:#eee;font-family:sans-serif} </style>
<iframe id="frame" src="about:blank" style="width:100%;height:100vh;border:0"></iframe>

<script type="module">
import { BopVstHost } from './src/BopVstHost.js';
import { BopVstGui } from './src/BopVstGui.js';

const host = new BopVstHost();
const gui = new BopVstGui(frame.contentWindow.document.body, {
  onParamChange: (id, v) => host.setParameter(id, v)
});

// MIDI input example
navigator.requestMIDIAccess?.().then(m => {
  m.inputs.forEach(i => i.onmidimessage = ({data:[s,n,v]}) => {
    if (s === 0x90 && v) host.noteOn(n, v/127);
    if (s === 0x80 || (s === 0x90 && !v)) host.noteOff(n);
  });
});
</script>