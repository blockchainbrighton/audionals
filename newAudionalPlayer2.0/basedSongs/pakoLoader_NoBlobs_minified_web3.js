// pakoLoader_NoBlobs.js

const keyMap={0:"projectName",1:"artistName",2:"projectBPM",3:"currentSequence",4:"channelURLs",5:"channelVolume",6:"channelPlaybackSpeed",7:"trimSettings",8:"projectChannelNames",9:"startSliderValue",10:"endSliderValue",11:"totalSampleDuration",12:"start",13:"end",14:"projectSequences",15:"steps"},reverseKeyMap=Object.fromEntries(Object.entries(keyMap).map((([e,t])=>[t,+e]))),channelMap=Array.from({length:26},((e,t)=>String.fromCharCode(65+t))),reverseChannelMap=Object.fromEntries(channelMap.map(((e,t)=>[e,t]))),decompressSteps=e=>e.flatMap((e=>{if("number"==typeof e)return e;if("object"==typeof e&&"r"in e){const[t,r]=e.r;return Array.from({length:r-t+1},((e,r)=>t+r))}return"string"==typeof e&&e.endsWith("r")?{index:parseInt(e.slice(0,-1),10),reverse:!0}:void 0})),deserialize=e=>{const t=e=>Array.isArray(e)?e.map((e=>"object"==typeof e?t(e):e)):"object"==typeof e&&null!==e?Object.entries(e).reduce(((e,[r,n])=>{const a=keyMap[r]??r;return e[a]="projectSequences"===a?Object.entries(n).reduce(((e,[t,r])=>(e[t.replace("s","Sequence")]=Object.entries(r).reduce(((e,[t,r])=>{var n;return e[`ch${reverseChannelMap[t]}`]={steps:(n=r[reverseKeyMap.steps]||[],n.flatMap((e=>{if("number"==typeof e)return e;if("object"==typeof e&&"r"in e){const[t,r]=e.r;return Array.from({length:r-t+1},((e,r)=>t+r))}return"string"==typeof e&&e.endsWith("r")?{index:parseInt(e.slice(0,-1),10),reverse:!0}:void 0})))},e}),{}),e)),{}):t(n),e}),{}):e;return t(e)},loadPako=async()=>{try{const e=await fetch("/content/2109694f44c973892fb8152cf5c68607fb19288c045af1abc1716c1c3b4d69e6i0"),t=await e.text(),r=document.createElement("div");r.innerHTML=t;const n=r.querySelectorAll("script"),a=Array.from(n).find((e=>e.textContent.includes("pako")));if(!a)throw new Error("Pako library not found in the HTML content.");const o=document.createElement("script");o.textContent=a.textContent,document.head.appendChild(o),console.log("Pako library loaded:",pako)}catch(e){console.error("Error loading Pako:",e)}},processSerializedData=async e=>{try{await loadPako();const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");const r=await t.arrayBuffer(),n=pako.inflate(new Uint8Array(r)),a=new TextDecoder("utf-8").decode(n),o=JSON.parse(a),c=deserialize(o);console.log("Deserialized Data:",c),localStorage.setItem("jsonData",JSON.stringify(c)),window.jsonDataUrl="stored in localStorage";const s=document.createElement("script");s.src="/content/532f2bceb52a227b87b094bfd68d20ddd63fb70d1946919a94540c70b7e5f16fi0",document.head.appendChild(s)}catch(e){console.error("Error processing data:",e)}},getJsonData=()=>{const e=localStorage.getItem("jsonData");return e?JSON.parse(e):(console.error("No data found in localStorage"),null)};