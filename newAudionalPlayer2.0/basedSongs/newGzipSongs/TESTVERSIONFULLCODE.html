<!DOCTYPE html>
<title>TRUTH</title>
<link rel="stylesheet" href="/content/27679fb51975e991284bebdaa2e340ab0f4002ea5423c8849106e4dabbd43627i0">

<script> // pakoLoader_NoBlobs.js

    // pakoLoader_NoBlobs.js

const keyMap = {
    0: 'projectName',
    1: 'artistName',
    2: 'projectBPM',
    3: 'currentSequence',
    4: 'channelURLs',
    5: 'channelVolume',
    6: 'channelPlaybackSpeed',
    7: 'trimSettings',
    8: 'projectChannelNames',
    9: 'startSliderValue',
    10: 'endSliderValue',
    11: 'totalSampleDuration',
    12: 'start',
    13: 'end',
    14: 'projectSequences',
    15: 'steps'
};

const reverseKeyMap = Object.fromEntries(Object.entries(keyMap).map(([k, v]) => [v, +k]));
const channelMap = Array.from({ length: 26 }, (_, i) => String.fromCharCode(65 + i)); // A-Z
const reverseChannelMap = Object.fromEntries(channelMap.map((letter, i) => [letter, i]));

const decompressSteps = compressedSteps => {
    return compressedSteps.flatMap(step => {
        if (typeof step === 'number') {
            return step;
        } else if (typeof step === 'object' && 'r' in step) {
            const [start, end] = step.r;
            return Array.from({ length: end - start + 1 }, (_, i) => start + i);
        } else if (typeof step === 'string' && step.endsWith('r')) {
            return { index: parseInt(step.slice(0, -1), 10), reverse: true };
        }
    });
};

const deserialize = serializedData => {
    const recursiveDeserialize = data => {
        if (Array.isArray(data)) {
            return data.map(v => typeof v === 'object' ? recursiveDeserialize(v) : v);
        } else if (typeof data === 'object' && data !== null) {
            return Object.entries(data).reduce((acc, [shortKey, value]) => {
                const fullKey = keyMap[shortKey] ?? shortKey;
                acc[fullKey] = fullKey === 'projectSequences'
                    ? Object.entries(value).reduce((seqAcc, [shortSeqKey, channels]) => {
                        const seqKey = shortSeqKey.replace('s', 'Sequence');
                        seqAcc[seqKey] = Object.entries(channels).reduce((chAcc, [letter, chValue]) => {
                            const chKey = `ch${reverseChannelMap[letter]}`;
                            chAcc[chKey] = { steps: decompressSteps(chValue[reverseKeyMap['steps']] || []) };
                            return chAcc;
                        }, {});
                        return seqAcc;
                    }, {})
                    : recursiveDeserialize(value);
                return acc;
            }, {});
        }
        return data;
    };
    return recursiveDeserialize(serializedData);
};

const loadPako = async () => {
    try {
        const response = await fetch('/content/2109694f44c973892fb8152cf5c68607fb19288c045af1abc1716c1c3b4d69e6i0');
        const htmlContent = await response.text();
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = htmlContent;
        const scripts = tempDiv.querySelectorAll('script');
        const pakoScript = Array.from(scripts).find(script => script.textContent.includes('pako'));

        if (!pakoScript) {
            throw new Error('Pako library not found in the HTML content.');
        }

        const scriptElement = document.createElement('script');
        scriptElement.textContent = pakoScript.textContent;
        document.head.appendChild(scriptElement);
        console.log('Pako library loaded:', pako);
    } catch (error) {
        console.error('Error loading Pako:', error);
    }
};


const processSerializedData = async (url) => {
    try {
        await loadPako();
        const response = await fetch(url);

        if (!response.ok) {
            throw new Error('Network response was not ok');
        }

        const compressedData = await response.arrayBuffer();
        const decompressedData = pako.inflate(new Uint8Array(compressedData));
        const jsonString = new TextDecoder('utf-8').decode(decompressedData);
        const serializedData = JSON.parse(jsonString);
        const originalData = deserialize(serializedData);
        console.log('Deserialized Data:', originalData);

        // Store the deserialized data in localStorage
        localStorage.setItem('jsonData', JSON.stringify(originalData));

        // Set window.jsonDataUrl to ensure it's defined
        window.jsonDataUrl = 'stored in localStorage';

        // songLoaderConfig_B_NoBlobs.js

        function loadScript(e, o) {
            const d = document.createElement("script");
            d.src = e;
            d.onload = o;
            d.onerror = () => console.error(`[debug] Error loading script: ${e}`);
            document.head.appendChild(d);
        }

        loadScript("/content/e575d3519ca3d6eb6a8d34e4c969dee9ef72b84766fd3f8f2ed2aeead06a4f66i0", function () {
            console.log("[debug] titleConfig.js loaded successfully.");
            console.log("Deserialized Data URL:", window.jsonDataUrl);

            // Define loadScriptsInOrder function
            function loadScriptsInOrder(scripts, callback) {
                const loadNextScript = index => {
                    if (index >= scripts.length) {
                        callback();
                    } else {
                        loadScript(scripts[index], () => loadNextScript(index + 1));
                    }
                };
                loadNextScript(0);
            }

            // Updated initializeScripts function
            function initializeScripts() {
                loadScriptsInOrder( () => {
                    // Combine all script arrays into the main scriptsToLoad array
                    window.scriptsToLoad = [
                        ...window.audionalPlayerScripts,
                        ...window.titleDisplayScripts,
                        ...window.colourPaletteScrips,
                        ...window.colourSettingsScripts,
                        ...window.visualiserScripts,
                        ...window.visualiserLoggingScripts
                    ];

                    // Load the main loader script
                    loadScript('/content/f9b3a2f4a426432ead5c01e2e80c18cc7eb14f567cbea8254f66f7fa5a7d0061i0', () => {
                        console.log("[debug] loader_NoBlobs.js loaded successfully.");
                    });
                });
            }

            // Instead of loading scriptLoaderMaster.js from URL, directly embed its logic here
            if (typeof initializeScripts === "function") {
                initializeScripts();
            } else {
                console.error("[debug] Error: initializeScripts function is not defined.");
            }

        });

    } catch (error) {
        console.error('Error processing data:', error);
    }
};



const getJsonData = () => {
    const data = localStorage.getItem('jsonData');
    if (data) {
        return JSON.parse(data);
    } else {
        console.error('No data found in localStorage');
        return null;
    }
};


</script> // pakoLoader_NoBlobs.js
<script>
window.seed=1;const dataUrl="/content/5527d0cc95ce5ce6eedf4e275234da8b1fe087512d0db618b6de1aaad437c96bi0"; // gzipSongFile.js
processSerializedData(dataUrl);
</script>
