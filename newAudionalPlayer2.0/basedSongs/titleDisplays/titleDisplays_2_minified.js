// titleDisplays_2.js
!function(){let t=[];const e=10,n={};let i;function o(t,e,n,i){const o=document.createElement("div");return o.id=t,o.innerText=e||"",Object.assign(o.style,{opacity:"0",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",transformOrigin:"center center",...i}),n.appendChild(o),o}function s(){i||(i=!0,requestIdleCallback((()=>{const e=document.getElementById("text-display-container");e&&e.querySelectorAll("div").forEach((t=>{t.style.display="none",t.style.opacity="0",t.style.transform="translate(-50%, -50%) scale(1)"})),t.forEach(clearTimeout),t=[],i=!1})))}function a(){const i=window.titleConfig;if(!i)return;const{showTextTime:a={},hideTextTime:l={},fadeInDuration:c={},fadeOutDuration:r={},colors:d={},fontSizes:y={},fontStyles:p={},fontTypes:u={}}=i,m=document.createElement("div");m.id="text-display-container",Object.assign(m.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",pointerEvents:"none"}),document.body.appendChild(m);for(let t=1;t<=e;t++){const e=i[`displayText_${t}`]||"";n[`textDisplay${t}`]=o(`text-display-${t}`,e,m,{color:d[`displayText_${t}`]||"#000",fontSize:y[`displayText_${t}`]||"16px",fontWeight:p[`displayText_${t}`]||"normal",fontFamily:u[`displayText_${t}`]||"Arial, sans-serif"})}function f(t,e){const n=i=>{n.startTime||(n.startTime=i);const o=i-n.startTime,s=Math.min(o/e,1),a=1-.995*s;Object.assign(t.style,{transform:`translate(-50%, -50%) scale(${a})`,opacity:""+(1-s)}),s<1?requestAnimationFrame(n):(Object.assign(t.style,{display:"none",transform:"translate(-50%, -50%) scale(1)"}),console.log(`[shrinkAndFadeOut] Finished shrinking and hiding ${t.id}`))};requestAnimationFrame(n)}document.addEventListener("playbackStarted",(function(){console.log("[textDisplay] Starting title timer..."),function(){s();for(let i=1;i<=e;i++){const e=a[`displayText_${i}`],o=l[`displayText_${i}`],s=c[`displayText_${i}`]||1e3,d=r[`displayText_${i}`]||1e3;void 0!==e&&void 0!==o&&(t.push(setTimeout((()=>{const t=n[`textDisplay${i}`];t.style.display="block",t.style.transition=`opacity ${s}ms`,requestAnimationFrame((()=>{t.style.opacity="1",console.log(`[showTextSequence] Showing textDisplay${i}`)}))}),e)),t.push(setTimeout((()=>{const t=n[`textDisplay${i}`];console.log(`[showTextSequence] Preparing to hide textDisplay${i}`),5===i?f(t,d):(t.style.transition=`opacity ${d}ms`,requestAnimationFrame((()=>{t.style.opacity="0",setTimeout((()=>{t.style.display="none",console.log(`[showTextSequence] Fading out and hiding textDisplay${i}`)}),d)})))}),o)))}}()})),document.addEventListener("playbackStopped",(function(){s()}))}!function t(){console.log("[textDisplay] Waiting for settings and titleConfig..."),window.titleConfig?(console.log("[textDisplay] Settings and titleConfig found, setting up text displays."),a()):setTimeout(t,100)}()}();