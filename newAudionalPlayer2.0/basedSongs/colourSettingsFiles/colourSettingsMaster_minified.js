// colourSettingsaMaster
console.log("Colour settings level 1 loaded");const hexCache=new Map,hslCache=new Map,rgbCache=new Map;let cachedSelections=null;function initializeSelections(){if(!cachedSelections){const e=BigInt(window.seed);if("bigint"!=typeof e||e<0n)throw new Error("[Seed] Seed must be a valid positive BigInt.");const o=Number(e%BigInt(fallbackColors.length)),t=Number(e%BigInt(modulatorNumbers.length));cachedSelections={fallbackColor:fallbackColors[o],modulator:modulatorNumbers[t]},console.log(`[Seed] Seed value: ${e}`),console.log(`[Seed] Calculated fallback index: ${o}`),console.log(`[Seed] Selected fallback color using seed: ${cachedSelections.fallbackColor}`),console.log(`[Seed] Calculated modulator index: ${t}`),console.log(`[Seed] Selected modulator value: ${cachedSelections.modulator}`)}return cachedSelections}function initializeHexCache(e){for(const o in e)for(const t of e[o])hexCache.set(t.index,t.hex)}function getHexFromIndex(e){if(hexCache.has(e))return hexCache.get(e);throw new Error(`Color with index ${e} not found in provided palette.`)}function getHslColor(e,o){const t=`${e}-${o}`;if(hslCache.has(t))return hslCache.get(t);const n=`hsl(${e%o*360}, 100%, 50%)`;return hslCache.set(t,n),n}function hexToRgb(e){if(rgbCache.has(e))return rgbCache.get(e);3===(e=e.replace("#","")).length&&(e=e.split("").map((e=>e+e)).join(""));const o=parseInt(e,16),t={r:o>>16&255,g:o>>8&255,b:255&o};return rgbCache.set(e,t),t}function getConditionalColorWithIndex(e,o,t,n,r){const l=getHexFromIndex(n),a=getHexFromIndex(r);return((e/t|0)+(o/t|0))%111==0?l:a}function getRandomColor(e){return e[Math.floor(Math.random()*e.length)]}function getColorFromPalette(e,o){const t=o.find((o=>o.index===e));if(!t)throw new Error(`Color with index ${e} not found in provided palette.`);return hexToRgb(t.hex)}function getDynamicRgbWithIndex(e,o,t,n,r){const l=getHexFromIndex(r),{r:a,g:c,b:i}=hexToRgb(l);return`rgba(${a}, ${c}, ${i}, ${Math.min(Math.sqrt(Math.pow(e-t,2)+Math.pow(o-n,2))/50,1)})`}function getFallbackColor(){return initializeSelections().fallbackColor}function getModulatorByIndex(){return initializeSelections().modulator}function getColorSettings(e){const o={peach:{rFactor:1,gFactor:2,bFactor:3},blue:{rFactor:.5,gFactor:.8,bFactor:1.5},default:{rFactor:.5,gFactor:.8,bFactor:1.5}};return o[e]||o.default}function dynamicRgb(e,o,t,n){const{rFactor:r,gFactor:l,bFactor:a}=getColorSettings(n),c=Math.floor(e*((o+255)/(t*r)*255))%256,i=Math.floor(e*((o+255)/(t*l)*255))%256,h=Math.floor(e*((o+255)/(t*a)*255))%256;return c>.01||i>.01||h>.01?`rgb(${c}, ${i}, ${h})`:getFallbackColor()}function getDynamicRgb(e,o,t,n,r,l,a){return`rgba(${r}, ${l}, ${a}, ${Math.min(Math.sqrt(Math.pow(e-t,2)+Math.pow(o-n,2))/50,1)})`}function getConditionalColor(e,o,t,n,r){return((e/t|0)+(o/t|0))%111==0?n:r}initializeHexCache(colorPalette);