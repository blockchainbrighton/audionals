<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FROM DAY ONE</title>
    <style>
        img#album-art {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            z-index: 1001 !important;
            position: relative;
        }
    </style>
</head>
<body>
    <h1>FROM DAY ONE</h1>
    <div id="album-art-container" style="text-align:center;">
        <img id="album-art" alt="Album Art" style="max-width: 60%; max-height: 80vh; object-fit: contain; display: none;">
    </div>
    <script>
        window.seed = 1;
        document.title = "FROM DAY ONE";
        window.songDataUrl = "/content/633100d631767ddb9a309f5a2a66f5a66d5abd839f3b1c55642690d484189971i0";
        window.albumArtUrl = "/content/e7d344ef3098d0889856978c4d2e81ccf2358f7f8b66feecc71e03036c59ad48i0";

        async function fetchHtml(url) {
            console.log('{imageDebug} Fetching HTML from URL:', url);
            const response = await fetch(url);
            if (!response.ok) {
                console.error('{imageDebug} Failed to fetch HTML:', response.statusText);
                throw new Error('Network response was not ok');
            }
            console.log('{imageDebug} Successfully fetched HTML.');
            return response.text();
        }

        function extractBase64Image(htmlText) {
            console.log('{imageDebug} Parsing fetched HTML.');
            const parser = new DOMParser();
            const doc = parser.parseFromString(htmlText, 'text/html');
            const imgElement = doc.querySelector('img#OB1_Image');
            if (imgElement) {
                console.log('{imageDebug} Base64 image found.');
                return imgElement.src;
            } else {
                console.error('{imageDebug} Base64 image not found in the provided HTML.');
                return null;
            }
        }

        async function displayAlbumArtHtml(htmlUrl) {
            try {
                const htmlText = await fetchHtml(htmlUrl);
                console.log('{imageDebug} Extracting Base64 image from fetched HTML.');
                const base64Image = extractBase64Image(htmlText);

                if (base64Image) {
                    const albumArtImg = document.getElementById('album-art');
                    albumArtImg.src = base64Image;
                    albumArtImg.style.display = 'block';
                    console.log('{imageDebug} Album art image set and displayed.');

                    // Periodic check to ensure image remains visible
                    setInterval(() => {
                        if (albumArtImg.style.display !== 'block') {
                            console.error('{imageDebug} Image disappeared, resetting visibility.');
                            albumArtImg.style.display = 'block';
                            albumArtImg.style.visibility = 'visible';
                            albumArtImg.style.opacity = 1;
                        } else {
                            console.log('{imageDebug} Image is still displayed correctly.');
                        }
                    }, 2000);
                } else {
                    console.error('{imageDebug} No Base64 image to display.');
                }
            } catch (error) {
                console.error('{imageDebug} Error in displaying album art:', error);
            }
        }

        console.log('{imageDebug} Initiating album art display process.');
        displayAlbumArtHtml(window.albumArtUrl);
    </script>
    <script src="/content/1a110290a15492d3a02b1db8f7d982bc880dfe14b7ed0c9afe6531af4592e055i0"></script>
</body>
</html>
