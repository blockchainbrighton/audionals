<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>DNB Bass Toy</title>
  <link rel="stylesheet" href="./styles.module.css" />
</head>
<body class="app__root">
  <header class="app__transport" aria-label="Transport">
    <button id="playBtn" class="btn__primary" title="Space">Play</button>
    <button id="stopBtn" class="btn__ghost">Stop</button>

    <label class="ctrl__group" title="+ / -">
      <span>BPM</span>
      <input id="bpm" type="number" min="20" max="220" value="174" />
    </label>

    <button id="tapBtn" class="btn__ghost" title="Tap Tempo">Tap</button>

    <label class="ctrl__group" title="Feel">
      <span>Swing</span>
      <input id="swing" type="range" min="0" max="60" value="0" />
      <span id="swingVal" class="readout">0%</span>
    </label>

    <label class="ctrl__group">
      <span>Clock</span>
      <select id="clockDiv">
        <option>1/1</option>
        <option>1/2</option>
        <option>1/2.</option>
        <option>1/2t</option>
        <option selected>1/4</option>
        <option>1/4.</option>
        <option>1/4t</option>
        <option>1/8</option>
        <option>1/8.</option>
        <option>1/8t</option>
        <option>1/16</option>
        <option>1/16.</option>
        <option>1/16t</option>
        <option>1/32</option>
      </select>
    </label>

    <div class="meter__wrap" title="Output">
      <canvas id="meter" width="72" height="16" aria-hidden="true"></canvas>
      <label class="meter__lbl">
        <input id="limitToggle" type="checkbox" checked />
        <span>Limiter</span>
      </label>
    </div>
  </header>

  <main class="app__main">
    <section class="presets__row" aria-label="Presets">
      <button id="prevPreset" class="btn__ghost" title="Prev Preset">◀</button>
      <label class="ctrl__group preset__picker">
        <span>Preset</span>
        <select id="presetSel" size="1"></select>
      </label>
      <button id="nextPreset" class="btn__ghost" title="Next Preset">▶</button>
      <span id="presetTag" class="tag__pill">–</span>
    </section>

    <section class="pads__grid" aria-label="Variations">
      <button class="pad__cell" data-pad="0" title="Pad 1 (key 1)">1</button>
      <button class="pad__cell" data-pad="1" title="Pad 2 (key 2)">2</button>
      <button class="pad__cell" data-pad="2" title="Pad 3 (key 3)">3</button>
      <button class="pad__cell" data-pad="3" title="Pad 4 (key 4)">4</button>
      <button class="pad__cell" data-pad="4" title="Pad 5 (key 5)">5</button>
      <button class="pad__cell" data-pad="5" title="Pad 6 (key 6)">6</button>
      <button class="pad__cell" data-pad="6" title="Pad 7 (key 7)">7</button>
      <button class="pad__cell" data-pad="7" title="Pad 8 (key 8)">8</button>
    </section>

    <section class="knobs__row" aria-label="Macros">
      <div class="knob__group" title="Cutoff">
        <label>Cutoff</label>
        <input id="knobCutoff" type="range" min="80" max="8000" step="1" value="1200" />
      </div>
      <div class="knob__group" title="Resonance">
        <label>Res</label>
        <input id="knobRes" type="range" min="0.1" max="20" step="0.1" value="0.7" />
      </div>
      <div class="knob__group" title="LFO Rate (click label to toggle Sync/Hz)">
        <button id="lfoMode" class="btn__mini">Sync</button>
        <input id="knobLfoRate" type="range" min="0.05" max="16" step="0.01" value="2" />
      </div>
      <div class="knob__group" title="LFO Depth">
        <label>Depth</label>
        <input id="knobLfoDepth" type="range" min="0" max="1" step="0.001" value="0.5" />
      </div>
      <div class="knob__group" title="Drive (pre-filter)">
        <label>Drive</label>
        <input id="knobDrive" type="range" min="0" max="1" step="0.001" value="0.2" />
      </div>
      <div class="knob__group" title="Pattern intensity">
        <label>Pattern</label>
        <select id="patternSel"></select>
        <input id="knobPatternAmt" type="range" min="0" max="1" step="0.01" value="0.75" />
      </div>
    </section>

    <section class="actions__row">
      <button id="randBtn" class="btn__ghost" title="R">Randomize</button>
      <button id="resetBtn" class="btn__ghost" title="0">Reset</button>
      <div class="state__io">
        <button id="exportBtn" class="btn__mini">Export</button>
        <button id="importBtn" class="btn__mini">Import</button>
        <input id="stateStr" class="state__field" type="text" placeholder="state JSON…" />
      </div>
    </section>
  </main>

  <footer class="app__footer">
    <span>Keys: Space=Play/Stop, 1–8 Pads, +/- BPM, R Randomize, 0 Reset</span>
  </footer>

  <script type="module" src="./synth.js"></script>
</body>
</html>
