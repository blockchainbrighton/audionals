<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DnB Bass Synth Toy</title>
    <link rel="stylesheet" href="styles.module.css">
    <script type="module" src="synth.js"></script>
</head>
<body>
    <div id="synth-container">
        <!-- TOP: TRANSPORT & GLOBAL CONTROLS -->
        <header class="controls-group transport-controls">
            <div class="transport-left">
                <button id="play-stop-button" title="Play/Stop (Spacebar)">PLAY</button>
                <div class="control-stack">
                    <label for="bpm-knob">BPM</label>
                    <input type="number" id="bpm-input" value="174" min="20" max="220">
                    <button id="tap-tempo-button" title="Tap Tempo">TAP</button>
                </div>
            </div>
            <div class="transport-right">
                <div class="control-stack">
                    <label for="swing-knob">Swing %</label>
                    <input type="range" id="swing-knob" min="0" max="60" value="0" class="knob-slider">
                    <span id="swing-value">0</span>
                </div>
                <div class="control-stack">
                    <label>Master</label>
                    <div class="output-meter-container">
                        <meter id="output-meter" min="0" max="1" value="0"></meter>
                    </div>
                    <button id="limiter-toggle" class="active" title="Safety Limiter On/Off">LIMITER</button>
                </div>
            </div>
        </header>

        <!-- MIDDLE: PRESET & PADS -->
        <section class="controls-group core-performance">
            <div class="preset-selector">
                <button id="prev-preset" title="Previous Preset">&lt;</button>
                <div id="preset-display" class="display-box">
                    <span id="preset-number">01</span>
                    <span id="preset-name">Loading...</span>
                    <span id="preset-category">Sub</span>
                </div>
                <button id="next-preset" title="Next Preset">&gt;</button>
            </div>
            <div id="variation-pads" class="pads-grid">
                <!-- Pads will be generated by JS, but here's an example -->
                <button class="pad" data-pad="0" title="Variation Pad 1 (Key: 1)">1</button>
                <button class="pad" data-pad="1" title="Variation Pad 2 (Key: 2)">2</button>
                <button class="pad" data-pad="2" title="Variation Pad 3 (Key: 3)">3</button>
                <button class="pad" data-pad="3" title="Variation Pad 4 (Key: 4)">4</button>
                <button class="pad" data-pad="4" title="Variation Pad 5 (Key: 5)">5</button>
                <button class="pad" data-pad="5" title="Variation Pad 6 (Key: 6)">6</button>
                <button class="pad" data-pad="6" title="Variation Pad 7 (Key: 7)">7</button>
                <button class="pad" data-pad="7" title="Variation Pad 8 (Key: 8)">8</button>
            </div>
        </section>

        <!-- BOTTOM: MAIN SYNTH KNOBS -->
        <main class="controls-group main-knobs">
            <div class="knob-group" title="Filter Cutoff Frequency">
                <label for="cutoff-knob">Cutoff</label>
                <input type="range" id="cutoff-knob" min="20" max="20000" step="1" value="8000" class="knob-slider">
                <span id="cutoff-value">8000 Hz</span>
            </div>
            <div class="knob-group" title="Filter Resonance">
                <label for="resonance-knob">Resonance</label>
                <input type="range" id="resonance-knob" min="0" max="30" step="0.1" value="1" class="knob-slider">
                 <span id="resonance-value">1.0</span>
            </div>
            <div class="knob-group" title="LFO Rate (Speed)">
                <label for="lfo-rate-knob">LFO Rate</label>
                <input type="range" id="lfo-rate-knob" min="0" max="100" step="1" value="50" class="knob-slider">
                <button id="lfo-sync-toggle" class="active">SYNC</button>
            </div>
            <div class="knob-group" title="LFO Modulation Depth">
                <label for="lfo-depth-knob">LFO Depth</label>
                <input type="range" id="lfo-depth-knob" min="0" max="100" step="1" value="50" class="knob-slider">
                <span id="lfo-depth-value">50%</span>
            </div>
            <div class="knob-group" title="Pre-Filter Saturation/Drive">
                <label for="drive-knob">Drive</label>
                <input type="range" id="drive-knob" min="0" max="100" step="1" value="0" class="knob-slider">
                 <span id="drive-value">0%</span>
            </div>
            <div class="knob-group" title="Rhythmic Pattern">
                <label for="pattern-select">Pattern</label>
                <select id="pattern-select">
                    <!-- Options populated by JS -->
                </select>
                <span class="info-text">Pads also change pattern</span>
            </div>
        </main>
        
        <!-- FOOTER: UTILITY BUTTONS -->
        <footer class="controls-group utility-controls">
            <button id="randomize-button" title="Gently randomize parameters (R)">Randomize</button>
            <button id="reset-button" title="Reset to preset defaults (0)">Reset Preset</button>
             <button id="export-button" title="Export current state to clipboard">Export</button>
            <button id="import-button" title="Import state from clipboard">Import</button>
        </footer>

    </div>
</body>
</html>