// --- START OF FILE utils.js ---
export function base64ToArrayBuffer(e){try{const t=e.split(",")[1]??e,n=window.atob(t),r=n.length,o=new Uint8Array(r);for(let e=0;e<r;e++)o[e]=n.charCodeAt(e);return o.buffer}catch(e){throw console.error("Error decoding Base64 string:",e),new Error("Failed to decode Base64 data.")}}export function clamp(e,t,n){return Math.max(t,Math.min(e,n))}export function _isInputFocused(e){const t=e.tagName.toLowerCase();return"input"===t||"textarea"===t||"select"===t||e.isContentEditable}export function createElement(e,t={},n=[]){const r=document.createElement(e);return Object.keys(t).forEach((e=>{"className"===e?r.className=t[e]:"textContent"===e?r.textContent=t[e]:"disabled"===e&&t[e]?r.disabled=!0:"attributes"===e?Object.entries(t[e]).forEach((([e,t])=>{r.setAttribute(e,t)})):"boolean"==typeof t[e]?t[e]&&r.setAttribute(e,""):r.setAttribute(e,t[e])})),n.forEach((e=>{"string"==typeof e?r.appendChild(document.createTextNode(e)):e instanceof HTMLElement&&r.appendChild(e)})),r}export function addListener(e,t,n,r){if(e)e.addEventListener(t,n);else{["infoToggleBtn","referencePanel"].includes(r)||console.warn(`[setupEventListeners] Element "${r}" not found. Listener not attached.`)}}