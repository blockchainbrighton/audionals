// --- START OF FILE uiUpdater.js ---
let controlsContainer=null,errorMessageDiv=null,playOnceBtn=null,loopToggleBtn=null,reverseToggleBtn=null,tempoSlider=null,tempoValueSpan=null,pitchSlider=null,pitchValueSpan=null,volumeSlider=null,volumeValueSpan=null,multiplierSlider=null,multiplierValueSpan=null,mainImage=null,controlElementsList=[];const $=e=>document.getElementById(e);export function init(){console.log("UI Updater: Initializing element references..."),controlsContainer=$("controls-container"),errorMessageDiv=$("error-message"),playOnceBtn=$("play-once-btn"),loopToggleBtn=$("loop-toggle-btn"),reverseToggleBtn=$("reverse-toggle-btn"),tempoSlider=$("tempo-slider"),tempoValueSpan=$("tempo-value"),pitchSlider=$("pitch-slider"),pitchValueSpan=$("pitch-value"),volumeSlider=$("volume-slider"),volumeValueSpan=$("volume-value"),multiplierSlider=$("multiplier-slider"),multiplierValueSpan=$("multiplier-value"),mainImage=$("main-image"),controlElementsList=[playOnceBtn,loopToggleBtn,reverseToggleBtn,tempoSlider,pitchSlider,volumeSlider,multiplierSlider].filter(Boolean),controlsContainer||console.warn("UI Updater: controlsContainer not found."),tempoValueSpan||console.warn("UI Updater: tempoValueSpan not found."),pitchValueSpan||console.warn("UI Updater: pitchValueSpan not found."),volumeValueSpan||console.warn("UI Updater: volumeValueSpan not found."),multiplierValueSpan||console.warn("UI Updater: multiplierValueSpan not found."),console.log(`UI Updater: Found ${controlElementsList.length} control elements.`)}export const setControlsContainer=e=>{e instanceof HTMLElement?(controlsContainer=e,console.log("UI Updater: Controls container set via setControlsContainer.")):console.error("UI Updater: Invalid element passed to setControlsContainer.")};const updateValueDisplay=(e,t,o=(e=>String(e)),l="Value")=>e?e.textContent="function"==typeof o?o(t):t:console.warn(`UI Updater: Missing span ref for ${l}.`),updateToggleButton=(e,t,o)=>{if(!e)return console.warn(`UI Updater: Missing button for "${o}"`);e.textContent=`${o}: ${t?"On":"Off"}`,e.classList.toggle("active",!!t)},setControlsDisabledState=e=>{(controlsContainer||$("controls-container"))?.classList.toggle("disabled",e),controlElementsList.forEach((t=>t&&(t.disabled=e)))};export const updateTempoDisplay=e=>updateValueDisplay(tempoValueSpan,e,String,"Tempo");export const updatePitchDisplay=e=>updateValueDisplay(pitchValueSpan,e,(e=>`${Math.round(100*e)}`),"Pitch");export const updateVolumeDisplay=e=>updateValueDisplay(volumeValueSpan,e,(e=>`${Math.round(100*e)}`),"Volume");export const updateScheduleMultiplierDisplay=e=>updateValueDisplay(multiplierValueSpan,e,(e=>`x${e}`),"Multiplier");export const updateLoopButton=e=>updateToggleButton(loopToggleBtn,e,"Play Loop");export const updateReverseButton=e=>updateToggleButton(reverseToggleBtn,e,"Reverse");export const enableControls=()=>setControlsDisabledState(!1);export const disableControls=()=>setControlsDisabledState(!0);export const showError=e=>{const t=errorMessageDiv||$("error-message");t?(t.textContent=e,t.style.display=e?"block":"none"):console.error("UI Error (message div missing):",e)};export const clearError=()=>{const e=errorMessageDiv||$("error-message");e&&(e.textContent="",e.style.display="none")};export const setImageSource=e=>{const t=mainImage||$("main-image");t?(t.src=e,t.style.visibility="visible"):console.error("UI Updater: mainImage not found.")};const IMAGE_ID="main-image",ANIMATION_CLASS="shake-all-directions-animation",ANIMATION_DURATION_MS=150,el=document.getElementById(IMAGE_ID);el||console.warn(`Image animation module: no element with ID "${IMAGE_ID}"`);export function triggerAnimation(){el&&!el.classList.contains(ANIMATION_CLASS)&&(el.classList.add(ANIMATION_CLASS),setTimeout((()=>{el.isConnected&&el.classList.remove(ANIMATION_CLASS)}),150))}