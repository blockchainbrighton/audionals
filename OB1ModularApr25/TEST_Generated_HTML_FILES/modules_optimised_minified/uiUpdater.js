// --- uiUpdater.js ---
let controlsContainer,errorMessageDiv,playOnceBtn,loopToggleBtn,reverseToggleBtn,tempoSlider,tempoValueSpan,pitchSlider,pitchValueSpan,volumeSlider,volumeValueSpan,multiplierSlider,multiplierValueSpan,mainImage,controlElementsList=[];export function init(){console.log("UI Updater: Initializing element references..."),controlsContainer=document.getElementById("controls-container"),errorMessageDiv=document.getElementById("error-message"),playOnceBtn=document.getElementById("play-once-btn"),loopToggleBtn=document.getElementById("loop-toggle-btn"),reverseToggleBtn=document.getElementById("reverse-toggle-btn"),tempoSlider=document.getElementById("tempo-slider"),tempoValueSpan=document.getElementById("tempo-value"),pitchSlider=document.getElementById("pitch-slider"),pitchValueSpan=document.getElementById("pitch-value"),volumeSlider=document.getElementById("volume-slider"),volumeValueSpan=document.getElementById("volume-value"),multiplierSlider=document.getElementById("multiplier-slider"),multiplierValueSpan=document.getElementById("multiplier-value"),mainImage=document.getElementById("main-image"),controlElementsList=[playOnceBtn,loopToggleBtn,reverseToggleBtn,tempoSlider,pitchSlider,volumeSlider,multiplierSlider].filter(Boolean),controlElementsList.forEach((e=>e||console.warn("Element not found."))),console.log(`UI Updater init: Found ${controlElementsList.length} control elements.`)}export function setControlsContainer(e){e instanceof HTMLElement?(controlsContainer=e,console.log("UI Updater: Controls container reference updated.")):console.error("UI Updater: Invalid element passed to setControlsContainer.")}const updateValueDisplay=(e,t,o=String,n="Value")=>{if(!e)return console.warn(`Missing span for ${n}.`);e.textContent=o(t)},updateToggleButton=(e,t,o)=>{if(!e)return console.warn(`Button missing for ${o}`);e.textContent=`${o}: ${t?"On":"Off"}`,e.classList.toggle("active",t)},setControlsDisabledState=e=>{const t=controlsContainer||document.getElementById("controls-container");t?t.classList.toggle("disabled",e):console.warn("Controls container not found!"),controlElementsList.forEach((t=>t&&(t.disabled=e)))};export const updateTempoDisplay=e=>updateValueDisplay(tempoValueSpan,e);export const updatePitchDisplay=e=>updateValueDisplay(pitchValueSpan,e,(e=>`${Math.round(100*e)}`));export const updateVolumeDisplay=e=>updateValueDisplay(volumeValueSpan,e,(e=>`${Math.round(100*e)}`));export const updateLoopButton=e=>updateToggleButton(loopToggleBtn,e,"Play Loop");export const updateReverseButton=e=>updateToggleButton(reverseToggleBtn,e,"Reverse");export const updateScheduleMultiplierDisplay=e=>updateValueDisplay(multiplierValueSpan,e,(e=>`x${e}`));export const enableControls=()=>setControlsDisabledState(!1);export const disableControls=()=>setControlsDisabledState(!0);export const showError=e=>{errorMessageDiv?(errorMessageDiv.textContent=e,errorMessageDiv.style.display=e?"block":"none"):console.error("Error message div not found!")};export const clearError=()=>{errorMessageDiv&&(errorMessageDiv.textContent="",errorMessageDiv.style.display="none")};export const setImageSource=e=>{mainImage?(mainImage.src=e,mainImage.style.visibility="visible"):console.error("Main image element not found")};