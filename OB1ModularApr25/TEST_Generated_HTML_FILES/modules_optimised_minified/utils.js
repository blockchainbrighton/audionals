// --- utils.js ---
export const base64ToArrayBuffer=e=>{try{const t=e.split(",")[1]??e,n=window.atob(t);return Uint8Array.from(n,(e=>e.charCodeAt(0))).buffer}catch(e){throw console.error("Error decoding Base64 string:",e),new Error("Failed to decode Base64 data.")}};export const clamp=(e,t,n)=>Math.max(t,Math.min(e,n));export const _isInputFocused=e=>["input","textarea","select"].includes(e?.tagName?.toLowerCase())||e?.isContentEditable;export const createElement=(e,t={},n=[])=>{const o=document.createElement(e);return Object.entries(t).forEach((([e,t])=>{"className"===e?o.className=t:"textContent"===e?o.textContent=t:"disabled"===e&&t?o.disabled=!0:"attributes"===e&&"object"==typeof t?Object.entries(t).forEach((([e,t])=>o.setAttribute(e,t))):"boolean"==typeof t?t&&o.setAttribute(e,""):o.setAttribute(e,t)})),n.forEach((e=>{"string"==typeof e?o.appendChild(document.createTextNode(e)):e instanceof HTMLElement&&o.appendChild(e)})),o};export const addListener=(e,t,n,o)=>{e?e.addEventListener(t,n):["infoToggleBtn","referencePanel"].includes(o)||console.warn(`[setupEventListeners] Element "${o}" not found. Listener not attached.`)};